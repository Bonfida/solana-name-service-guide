<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Marketplace - Solana Name Service Guide</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="deployment.html"><strong aria-hidden="true">2.</strong> Deployment</a></li><li class="chapter-item expanded "><a href="sns-ip/index.html"><strong aria-hidden="true">3.</strong> SNS IP</a></li><li class="chapter-item expanded "><a href="videos.html"><strong aria-hidden="true">4.</strong> Videos</a></li><li class="chapter-item expanded "><a href="installation.html"><strong aria-hidden="true">5.</strong> SNS Library</a></li><li class="chapter-item expanded "><a href="siwsns/index.html"><strong aria-hidden="true">6.</strong> SIWSNS</a></li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">7.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="registry.html"><strong aria-hidden="true">8.</strong> Name Registry</a></li><li class="chapter-item expanded "><a href="domain-name/wallet-guide/index.html"><strong aria-hidden="true">9.</strong> Wallet Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="domain-name/wallet-guide/resolving-domains.html"><strong aria-hidden="true">9.1.</strong> Resolving Domains</a></li><li class="chapter-item expanded "><a href="domain-name/wallet-guide/bridged-domains.html"><strong aria-hidden="true">9.2.</strong> Bridged Domains</a></li><li class="chapter-item expanded "><a href="domain-name/wallet-guide/twitter-handles.html"><strong aria-hidden="true">9.3.</strong> Twitter handles</a></li></ol></li><li class="chapter-item expanded "><a href="domain-name/index.html"><strong aria-hidden="true">10.</strong> Domain Name</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="domain-name/domain-tld.html"><strong aria-hidden="true">10.1.</strong> TLD</a></li><li class="chapter-item expanded "><a href="domain-name/web-resolution.html"><strong aria-hidden="true">10.2.</strong> Web resolution</a></li><li class="chapter-item expanded "><a href="domain-name/domain-direct-lookup.html"><strong aria-hidden="true">10.3.</strong> Direct look up</a></li><li class="chapter-item expanded "><a href="domain-name/domain-reverse-lookup.html"><strong aria-hidden="true">10.4.</strong> Reverse look up</a></li><li class="chapter-item expanded "><a href="domain-name/domain-find-for-owner.html"><strong aria-hidden="true">10.5.</strong> Get all domains of a user</a></li><li class="chapter-item expanded "><a href="domain-name/all-domains.html"><strong aria-hidden="true">10.6.</strong> Get all domains</a></li><li class="chapter-item expanded "><a href="domain-name/records.html"><strong aria-hidden="true">10.7.</strong> Records</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="domain-name/records/records.html"><strong aria-hidden="true">10.7.1.</strong> Records V1</a></li><li class="chapter-item expanded "><a href="domain-name/records/records-v2.html"><strong aria-hidden="true">10.7.2.</strong> Records V2</a></li></ol></li><li class="chapter-item expanded "><a href="domain-name/edit-domain-content.html"><strong aria-hidden="true">10.8.</strong> Edit domain content</a></li><li class="chapter-item expanded "><a href="domain-name/transfer.html"><strong aria-hidden="true">10.9.</strong> Transfer domains</a></li><li class="chapter-item expanded "><a href="domain-name/favorite-domain.html"><strong aria-hidden="true">10.10.</strong> Favorite domain</a></li><li class="chapter-item expanded "><a href="domain-name/react-hooks/index.html"><strong aria-hidden="true">10.11.</strong> React hooks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="domain-name/react-hooks/use-domains.html"><strong aria-hidden="true">10.11.1.</strong> useDomains</a></li><li class="chapter-item expanded "><a href="domain-name/react-hooks/use-domain-records.html"><strong aria-hidden="true">10.11.2.</strong> useRecords</a></li><li class="chapter-item expanded "><a href="domain-name/react-hooks/use-records-V2.html"><strong aria-hidden="true">10.11.3.</strong> useRecordsV2</a></li><li class="chapter-item expanded "><a href="domain-name/react-hooks/use-domains-for-user.html"><strong aria-hidden="true">10.11.4.</strong> useDomainsForUser</a></li><li class="chapter-item expanded "><a href="domain-name/react-hooks/use-favorite-domain.html"><strong aria-hidden="true">10.11.5.</strong> useFavoriteDomain</a></li><li class="chapter-item expanded "><a href="domain-name/react-hooks/use-profile-pic.html"><strong aria-hidden="true">10.11.6.</strong> useProfilePic</a></li></ol></li><li class="chapter-item expanded "><a href="domain-name/vue.html"><strong aria-hidden="true">10.12.</strong> Vue SDK</a></li><li class="chapter-item expanded "><a href="domain-name/tokenization.html"><strong aria-hidden="true">10.13.</strong> Tokenization</a></li><li class="chapter-item expanded "><a href="domain-name/registration.html"><strong aria-hidden="true">10.14.</strong> Registration</a></li><li class="chapter-item expanded "><a href="domain-name/media-kit.html"><strong aria-hidden="true">10.15.</strong> Media kit</a></li><li class="chapter-item expanded "><a href="domain-name/delete-domain.html"><strong aria-hidden="true">10.16.</strong> Delete domains</a></li><li class="chapter-item expanded "><a href="domain-name/subdomains/index.html"><strong aria-hidden="true">10.17.</strong> Subdomains</a></li><li class="chapter-item expanded "><a href="domain-name/devnet.html"><strong aria-hidden="true">10.18.</strong> Devnet</a></li><li class="chapter-item expanded "><a href="domain-name/sns-examples/index.html"><strong aria-hidden="true">10.19.</strong> Examples</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="domain-name/sns-examples/derivations.html"><strong aria-hidden="true">10.19.1.</strong> Key derivations</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="twitter/index.html"><strong aria-hidden="true">11.</strong> Twitter</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="twitter/twitter-tld.html"><strong aria-hidden="true">11.1.</strong> TLD</a></li><li class="chapter-item expanded "><a href="twitter/register.html"><strong aria-hidden="true">11.2.</strong> Registration</a></li><li class="chapter-item expanded "><a href="twitter/twitter-direct-lookup.html"><strong aria-hidden="true">11.3.</strong> Direct look up</a></li><li class="chapter-item expanded "><a href="twitter/twitter-reverse-lookup.html"><strong aria-hidden="true">11.4.</strong> Reverse look up</a></li></ol></li><li class="chapter-item expanded "><a href="sns-api/index.html"><strong aria-hidden="true">12.</strong> SNS API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sns-api/categories.html"><strong aria-hidden="true">12.1.</strong> Categories</a></li><li class="chapter-item expanded "><a href="sns-api/users.html"><strong aria-hidden="true">12.2.</strong> Users</a></li><li class="chapter-item expanded "><a href="sns-api/listings.html"><strong aria-hidden="true">12.3.</strong> Listings</a></li><li class="chapter-item expanded "><a href="sns-api/sales.html"><strong aria-hidden="true">12.4.</strong> Sales</a></li><li class="chapter-item expanded "><a href="sns-api/volumes.html"><strong aria-hidden="true">12.5.</strong> Volumes</a></li><li class="chapter-item expanded "><a href="sns-api/owners.html"><strong aria-hidden="true">12.6.</strong> Owners</a></li></ol></li><li class="chapter-item expanded "><a href="marketplace.html" class="active"><strong aria-hidden="true">13.</strong> Marketplace</a></li><li class="chapter-item expanded "><a href="sns-suggest/index.html"><strong aria-hidden="true">14.</strong> SNS Suggest API - Alpha</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sns-suggest/current-owner.html"><strong aria-hidden="true">14.1.</strong> Current Owner</a></li></ol></li><li class="chapter-item expanded "><a href="sns-quicknode/index.html"><strong aria-hidden="true">15.</strong> SNS Quicknode API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sns-quicknode/sns_getAllDomainsForOwner.html"><strong aria-hidden="true">15.1.</strong> sns_getAllDomainsForOwner</a></li><li class="chapter-item expanded "><a href="sns-quicknode/sns_getDomainData.html"><strong aria-hidden="true">15.2.</strong> sns_getDomainData</a></li><li class="chapter-item expanded "><a href="sns-quicknode/sns_getDomainKey.html"><strong aria-hidden="true">15.3.</strong> sns_getDomainKey</a></li><li class="chapter-item expanded "><a href="sns-quicknode/sns_getDomainRecordKey.html"><strong aria-hidden="true">15.4.</strong> sns_getDomainRecordKey</a></li><li class="chapter-item expanded "><a href="sns-quicknode/sns_getFavouriteDomain.html"><strong aria-hidden="true">15.5.</strong> sns_getFavouriteDomain</a></li><li class="chapter-item expanded "><a href="sns-quicknode/sns_getRegistrationTransaction.html"><strong aria-hidden="true">15.6.</strong> sns_getRegistrationTransaction</a></li><li class="chapter-item expanded "><a href="sns-quicknode/sns_getSubdomains.html"><strong aria-hidden="true">15.7.</strong> sns_getSubdomains</a></li><li class="chapter-item expanded "><a href="sns-quicknode/sns_getSupportedRecords.html"><strong aria-hidden="true">15.8.</strong> sns_getSupportedRecords</a></li><li class="chapter-item expanded "><a href="sns-quicknode/sns_resolveDomain.html"><strong aria-hidden="true">15.9.</strong> sns_resolveDomain</a></li><li class="chapter-item expanded "><a href="sns-quicknode/sns_reverseLookup.html"><strong aria-hidden="true">15.10.</strong> sns_reverseLookup</a></li><li class="chapter-item expanded "><a href="sns-quicknode/sns_getDomainReverseKey.html"><strong aria-hidden="true">15.11.</strong> sns_getDomainReverseKey</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Solana Name Service Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="marketplace"><a class="header" href="#marketplace">Marketplace</a></h1>
<h2 id="sns-marketplace"><a class="header" href="#sns-marketplace">SNS Marketplace</a></h2>
<p>The SNS Marketplace program makes it possible to integrate the purchase and sale of SNS domains directly into your own applications. Interact with the SNS Marketplace smart contract using our JS SDK linked below.</p>
<h3 id="deployment"><a class="header" href="#deployment">Deployment:</a></h3>
<ul>
<li>Program ID: <code>85iDfUvr3HJyLM2zcq5BXSiDvUWfw6cSE1FfNBo8Ap29</code></li>
<li>Auditor: Halborn</li>
<li>Audit report: <a href="https://github.com/HalbornSecurity/PublicReports/blob/master/Solana%20Program%20Audit/Bonfida_SNS_Solana_Program_Security_Assessment_Report_Halborn_Final.pdf">here</a></li>
<li>JS SDK: <a href="https://www.npmjs.com/package/@bonfida/name-offers">NPM</a></li>
</ul>
<p>This smart contract supports different types of sales:</p>
<ul>
<li>Fixed price</li>
<li>Unsolicited</li>
<li>Category</li>
<li>P2P</li>
</ul>
<p>The functions from our SDK detailed below will return instructions that you can use to build transactions.</p>
<p>Fixed price and unsolicited offers support the following tokens as quote currency: SOL, FIDA, USDC, USDT, mSOL, BONK, BAT, PYTH and bSOL.</p>
<p>All these listings can be accessed on <a href="https://www.sns.id/">sns.id</a></p>
<p>The SNS Marketplace also supports a referral system, allowing users to share <strong>15%</strong> of the transaction fees. This feature enables participants to earn rewards by referring new users to the marketplace. In order to earn the portion of the fees, users must pass their wallet address in <code>buyFixedPrice</code>, <code>acceptOffer</code> and <code>takeCategoryOffer</code></p>
<h3 id="fixed-price-offers"><a class="header" href="#fixed-price-offers">Fixed Price Offers</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct FixedPriceOffer {
    /// Account tag
    pub tag: Tag,
    /// Nonce
    pub nonce: u8,
    /// Name being sold
    pub name_account: Pubkey,
    /// Offer owner
    pub owner: Pubkey,
    /// Quote token used for offer
    pub quote_mint: Pubkey,
    /// Amount of the offer
    pub offer_amount: u64,
    // Offer amount token account destination
    pub token_destination: Pubkey,
}
<span class="boring">}</span></code></pre></pre>
<p>Fixed Price Offers allow sellers to list domain names for sale at a predetermined price. Buyers can purchase these domain names by paying the specified amount.</p>
<p>Creating a fixed price offer is handled by the <code>makeFixedPriceOffer</code> function, as shown in the code snippet below:</p>
<pre><code class="language-ts">const connection = new Connection(&quot;...&quot;);
const seller = new PublicKey(&quot;...&quot;); // Public key of the seller i.e domain owner
const mint = new PublicKey(&quot;EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v&quot;); // USDC mint
const amount = 1 * 1e6; // Amount with decimals, here 1 USDC
const { pubkey: domainKey } = getDomainKeySync(&quot;something.sol&quot;); // Domain public key

const ix = await makeFixedPriceOffer(
  connection,
  amount,
  mint,
  seller,
  domainKey,
  NAME_OFFERS_ID // The program ID that can be imported directly from our SDK
);
</code></pre>
<p>Buying a fixed price offer is facilitated through the <code>buyFixedPrice</code> function, which ensures the transfer of the domain to the buyer and the payment to the seller:</p>
<pre><code class="language-ts">const connection = new Connection(&quot;...&quot;);
const buyer = new PublicKey(&quot;...&quot;); // Public key of the offer buyer
const source = new PublicKey(&quot;...&quot;); // Source of the funds used to purchase the offer. In case of SOL it's the same as `buyer`. If another token is used, it's the ATA of the buyer for the given mint.
const { pubkey: domainKey } = getDomainKeySync(&quot;something.sol&quot;); // Domain public key
const referrer: PublicKey | undefined = undefined; // Optional referrer

// Use a util function from our SDK to get fixed price offers by name, by owner, or all fixed price offers.
const fixedPriceOffers = await getFixedPriceOffersForName(
  connection,
  domainKey
);

// This example arbitrarily selects the first fixed price offer in the list. Filter offers based on the your needs.
const fixedPriceKey = fixedPriceOffers[0].pubkey;

const ix = await buyFixedPrice(
  connection,
  fixedPriceKey,
  buyer,
  source,
  NAME_OFFERS_ID,
  referrer
);
</code></pre>
<p>Fixed price offers can be cancelled using the <code>cancelFixedPriceOffer</code> function.</p>
<h3 id="unsolicited-offers"><a class="header" href="#unsolicited-offers">Unsolicited Offers</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Offer {
    /// Tag
    pub tag: Tag,
    /// Nonce
    pub nonce: u8,
    /// Name account of the offer
    pub name_account: Pubkey,
    /// Offer owner
    pub owner: Pubkey,
    /// Quote token used for offer
    pub quote_mint: Pubkey,
    /// Amount of the offer
    pub offer_amount: u64,
    /// Escrow account key
    pub escrow: Pubkey,
}
<span class="boring">}</span></code></pre></pre>
<p>Unsolicited offers allow buyers to propose a purchase price for a domain not listed for sale. The domain owner can then accept or ignore the offer.</p>
<p>Placing an unsolicited offers is handled by the <code>makeOffer</code> function</p>
<pre><code class="language-ts">const mint = new PublicKey(&quot;EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v&quot;); // USDC mint
const amount = 1 * 1e6; // Amount with decimals, here 1 USDC
const { pubkey: domainKey } = getDomainKeySync(&quot;something.sol&quot;); // Domain public key
const owner = new PublicKey(&quot;...&quot;); // Owner of the unsolicited offer
const tokenSource = new PublicKey(&quot;...&quot;); // Token source used to place the offer.

const ix = await makeOffer(
  amount,
  domainKey,
  owner,
  mint,
  tokenSource,
  NAME_OFFERS_ID
);
</code></pre>
<p>An unsolicited offer can be accepted by the domain owner using the <code>acceptOffer</code> function:</p>
<pre><code class="language-ts">const connection = new Connection(&quot;...&quot;);
const domainOwner = new PublicKey(&quot;...&quot;); // Current domain owner
const { pubkey: domainKey } = getDomainKeySync(&quot;something.sol&quot;); // Domain public key
const offerEscrow = new PublicKey(&quot;...&quot;); // PDA used to store the funds of the offer, the address is written in the state
const destination = new PublicKey(&quot;...&quot;); // The token account used to receive the funds from the escrow
const referrer: PublicKey | undefined = undefined; // Optional referrer

// Use a util function from the SDK to get offers by domain name, by domain owner, etc.
const offers = await getOffersForName(connection, &quot;something.sol&quot;);

// This example arbitrarily selects the first offer in the list. Filter offers based on your needs.
const offerKey = offers[0].pubkey;
const offerOwner = offers[0].owner;

const ix = await acceptOffer(
  connection,
  NAME_OFFERS_ID,
  offerKey,
  offerOwner,
  publicKey,
  domainKey,
  offerEscrow,
  destination,
  referrer
);
</code></pre>
<p>Unsolicited offers can be canceled using the <code>cancelOffer</code> function.</p>
<h3 id="category-offers"><a class="header" href="#category-offers">Category offers</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct CategoryOffer {
    // Account tag
    pub tag: Tag,
    // The PDA nonce
    pub nonce: u8,
    // The total number of domains requested
    pub nb_domains: u64,
    // The SOL price per domain
    pub sol_price: u64,
    // The category of the offer
    pub category: Pubkey,
    // The owner of the offer
    pub owner: Pubkey,
    // Timestamp at which the offer was created
    pub created_at: u64,
}
<span class="boring">}</span></code></pre></pre>
<p>Category Offers allow buyers to bid on an entire domain category. Sellers can accept these offers, selling domains within the specified category.</p>
<p>The creation of a category offer is managed by the <code>makeCategoryOffer</code> function, which specifies the number of domains, the SOL price per domain, and the category:</p>
<pre><code class="language-ts">import { CATEGORIES } from &quot;@bonfida/sns-categories&quot;; // Map of current categories

const amount = 10 * LAMPORTS_PER_SOL; // Amount of the offer in lamports here 10 SOL
const nbDomains = 10; // Number of domains the buyer wants to buy
const buyer = new PublicKey(&quot;...&quot;);

// Filter CATEGORIES to find the categoryKey which is the Public key of the category.
const categoryKey = [...CATEGORIES].find(
  ([, value]) =&gt; value === &quot;999-club&quot;
)?.[0];

const ix = await makeCategoryOffer(
  amount,
  nbDomains,
  categoryKey,
  NAME_OFFERS_ID,
  buyer
);
</code></pre>
<p>Taking a category offer is facilitated through the <code>takeCategoryOffer</code> function, allowing sellers to sell domains within the category at the specified price.</p>
<pre><code class="language-ts">const connection = new Connection(&quot;...&quot;);
const { pubkey: domainKey } = getDomainKeySync(&quot;999.sol&quot;); // Domain public key
const memberKey = CategoryMember.findKey(&quot;999&quot;, categoryKey); // Membership of the domain to the category
const seller = new PublicKey(&quot;...&quot;); // Seller of the domain here 999.sol
const referrer: PublicKey | undefined = undefined; // Optional referrer

// Use a util function from the SDK to get category offers by category, category offers for a specific owner, etc.
const categoryOffers = await getCategoryOffer(connection, categoryKey);
// This example arbitrarily selects the first category offer in the list. Filter offers based on your needs.
const categoryOfferKey = categoryOffers[0].pubkey;

const ix = await takeCategoryOffer(
  connection,
  NAME_OFFERS_ID,
  categoryOfferKey,
  domainKey,
  memberKey,
  seller,
  referrer
);
</code></pre>
<p>Category offers can be cancelled using the <code>cancelCategoryOffer</code> function.</p>
<h3 id="p2p-offers"><a class="header" href="#p2p-offers">P2P Offers</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct P2pOffer {
    // Account tag
    pub tag: Tag,
    // Derivation nonce
    pub nonce: u8,
    // The owner of the p2p offer
    pub owner: Pubkey,
    // The counter party of the offer
    pub counter_party: Pubkey,
    // The domain(s) being traded
    pub domains: Vec&lt;Pubkey&gt;,
    // Domains against which the offer is priced
    pub quotes: Vec&lt;Pubkey&gt;,
    // Amount of SOL (in addition to the quote domains)
    pub amount: i64,
    // Expiry timestamp in seconds
    pub expiry_ts: u64,
}
<span class="boring">}</span></code></pre></pre>
<p>P2P (Peer-to-Peer) Offers enable direct transactions between a buyer and a seller without listing the domain publicly. Sellers can create a P2P offer specifying the buyer's address, the SOL amount, the domain names involved and optionally set an expiration date to the offer.</p>
<p>P2P offers can be created using the <code>makeP2p</code> function</p>
<pre><code class="language-ts">const amount = 10 * LAMPORTS_PER_SOL; // The SOL amount (in lamports) of the P2P offer (can be 0)
const owner = new PublicKey(&quot;...&quot;); // The owner of the P2P offer (i.e creator)
const baseDomains: PublicKey[] = []; // The domains the owner wants to sell
const quoteDomains: PublicKey[] = []; // The domains the owner wants to buy (i.e the domains of the counter party)
const endDate: number | undefined = undefined; // The unix timestamp (in seconds) at which the P2P offer expires (optional)
const counterParty = new PublicKey(&quot;...&quot;); // The counter party of the P2P offer

const ix = await makeP2p(
  amount,
  owner,
  baseDomains,
  quoteDomains,
  endDate,
  counterParty,
  NAME_OFFERS_ID
);
</code></pre>
<p>P2P offers can be accepted using the <code>acceptP2p</code> function</p>
<pre><code class="language-ts">const p2pOfferKey = new PublicKey(&quot;...&quot;); // The P2P offer key

const ix = await acceptP2p(connection, NAME_OFFERS_ID, p2pOfferKey);
</code></pre>
<p>P2P offers can be cancelled using <code>cancelP2p</code></p>
<h2 id="nft-marketplace"><a class="header" href="#nft-marketplace">NFT Marketplace</a></h2>
<p>Tokenized domain names can be purchased on NFT marketplaces such as <a href="https://magiceden.io/marketplace/bonfida">Magic Eden</a>, <a href="https://www.tensor.trade/trade/bonfida">Tensor</a>, <a href="https://www.sniper.xyz/collection/bonfida">Sniper</a> etc...</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="sns-api/owners.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="sns-suggest/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="sns-api/owners.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="sns-suggest/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
